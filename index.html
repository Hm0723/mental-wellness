<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mental Wellness Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Mental Wellness Hub</h1>
    <p>Your gentle space to learn, reflect, and practice small steps that support your wellbeing.</p>
  </header>

  <main>
    <section>
      <h2>Self-care foundations</h2>
      <div class="card">ğŸ›Œ Sleep rhythm: keep a consistent wake time, dim lights before bed.</div>
      <div class="card">ğŸš¶ Gentle movement: short walks, stretching, or light yoga.</div>
      <div class="card">ğŸ’¬ Connection: text a friend, share a small win.</div>
    </section>

    <section>
      <h2>Grounding exercises</h2>
      <div class="card">ğŸŒ¬ Box breathing: inhale 4, hold 4, exhale 4, hold 4.</div>
      <div class="card">ğŸ‘€ 5-4-3-2-1 senses: notice 5 see, 4 feel, 3 hear, 2 smell, 1 taste.</div>
    </section>

    <section>
      <h2>Resources</h2>
      <div class="card">ğŸ§  Finding a therapist: check local directories or community clinics.</div>
      <div class="card">ğŸ¤ Community & peers: support groups, NGOs, faith communities.</div>
      <div class="card">ğŸš¨ In crisis: seek immediate in-person help from emergency services.</div>
    </section>
  </main>

  <footer>
    This site provides general information only and isnâ€™t medical advice.
  </footer>

  <!-- Chatbot -->
  <button class="chat-launcher" id="chatToggle">ğŸ’¬</button>
  <div class="chat-panel" id="chatPanel">
    <div class="chat-header">Wellness Chatbot</div>
    <div class="chat-body" id="chatBody">
      <div class="msg bot">
        <div class="bubble">
          Hi ğŸ‘‹ Iâ€™m here to share grounding tips and self-care ideas. How are you feeling today?
        </div>
      </div>
    </div>
    <div class="chat-footer">
      <input id="chatInput" placeholder="Type a messageâ€¦" />
      <button id="chatSend">Send</button>
    </div>
  </div>

  <script>
    const WEBHOOK_URL = "https://n8ngc.codeblazar.org/webhook/f330b68b-3b5a-45b8-bb65-952280da2264";

    const chatToggle = document.getElementById("chatToggle");
    const chatPanel = document.getElementById("chatPanel");
    const chatBody = document.getElementById("chatBody");
    const chatInput = document.getElementById("chatInput");
    const chatSend = document.getElementById("chatSend");

    chatToggle.onclick = () => {
      chatPanel.style.display =
        chatPanel.style.display === "flex" ? "none" : "flex";
    };

    function addMessage(text, sender) {
      const msg = document.createElement("div");
      msg.className = "msg " + sender;
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;
      msg.appendChild(bubble);
      chatBody.appendChild(msg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    async function sendMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      addMessage(text, "user");
      chatInput.value = "";

      try {
        const res = await fetch(WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text })
        });
        const data = await res.json();
        console.log("Webhook response:", data); // âœ… Debugging
        addMessage(data.output || "No response received.", "bot");
      } catch (err) {
        console.error("Chatbot error:", err);
        addMessage("âš ï¸ Unable to connect to the chatbot service.", "bot");
      }
    }

    chatSend.onclick = sendMessage;
    chatInput.addEventListener("keydown", e => {
      if (e.key === "Enter") sendMessage();
    });
  </script>
</body>
</html>
